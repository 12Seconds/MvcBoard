@{
    ViewData["Title"] = "게시물 관리";
    ViewData["NavIndex"] = 3;
    
    // TODO 모델 데이터 받기
    // 게시판 리스트, 선택된 게시판 카테고리, 선택된 필터 인덱스, 검색어 -> GetUrl

    List<SelectListItem> BoardFilters = new List<SelectListItem>();
    BoardFilters.Add(new SelectListItem { Text = "전체 게시판", Value = "0", Selected = true });

    // 임시
    BoardFilters.Add(new SelectListItem { Text = "일반 - 자유", Value = "41" });
    BoardFilters.Add(new SelectListItem { Text = "전공 - 입시", Value = "61" });
    // 따로 만들어야 함
    // BoardFilters.Add(new SelectListItem { Text = "인기 게시판", Value = "1" });
    // BoardFilters.Add(new SelectListItem { Text = "공지 게시판", Value = "2" });

    List<SelectListItem> SearchFilters = new List<SelectListItem>();
    SearchFilters.Add(new SelectListItem { Text = "게시물 번호", Value = "PostId" });
    SearchFilters.Add(new SelectListItem { Text = "제목", Value = "Title", Selected = true });
    SearchFilters.Add(new SelectListItem { Text = "내용", Value = "Contents" });
    SearchFilters.Add(new SelectListItem { Text = "아이디", Value = "Id" });
    SearchFilters.Add(new SelectListItem { Text = "닉네임", Value = "Name" });
}

<link rel="stylesheet" href="@(Url.Content("~/css/post.css"))" />

<div class="manage_post_index">

    @* 왼쪽 메인 영역 *@
    <div class="index_main">
        <a asp-area="" asp-action="Index" asp-controller="Post" class="title_anchor">
            <h4>게시물 관리</h4>
        </a>
        <hr/>

        <div class="search_box">
            @using (Html.AjaxBeginForm("PostListPartial", "Post", new AjaxOptions { HttpMethod = "Get", UpdateTargetId = "post_list_container"@* , OnComplete = ""  *@}, new { id = "PostListForm" }))
            {
                @Html.DropDownList("BoardFilter", BoardFilters, "게시판", new { @id = "BoardFilterList", @class = "search_filter_drop"/* "form-control" */ })
                @Html.DropDownList("SearchFilter", SearchFilters, "검색 필터", new { @id = "SearchFilterList", @class = "search_filter_drop"/* "form-control" */ })
                @Html.TextBox("SearchWord", null, new { @class = "search_word_input", @placeholder = "", @autoComplete = "off" })
                <button type="submit" class="btn btn-outline-secondary btn-sm search_button">검색</button>
            }
        </div>

        @* 게시물 리스트 *@
        <div id="post_list_container" class=""></div>

       
    </div>
    
    @* 오른쪽 영역 *@
    <div class="index_right">
        
        @* 게시물 에디터 Partial View  *@
        <div id="post_editor_container"></div>
        @using (Html.AjaxBeginForm("MemberEditorPartial", "Member", new AjaxOptions { HttpMethod = "Get",UpdateTargetId = "post_editor_container"}, new { id = "PostEditorForm" }))
        {
            @Html.Hidden("UserId", "", new { id = "editor_userId_val" });
        }

    </div>
    
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // 최초 진입 시
        $('#PostListForm').submit();
    });
    
    /* 유저 리스트 업데이트 함수 */
    /*
    function updateMemeberList(page) {
        if (page > 0) {
            $('#page_index_val').val(page);
        }
        $('#MemberListForm_update').submit();
    }
    */

    /* 유저 에디터 로드 함수 */
    /*
    function updateMemberEditor(userId) {
        $('#editor_userId_val').val(userId);
        $('#PostEditorForm').submit();
    }
    */

    /* 오류 문구 노출 */
    function showAlert(message, exit) {

        alert(message);

        if (exit) {
            // memberEditorExit();
        }
    }

</script>
